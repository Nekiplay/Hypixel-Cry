name: Development Build
on: push

env:
  APP_VERSION: "1.1.0"

jobs:
  build:
    runs-on: ubuntu-latest
    permissions: write-all
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-java@v2
        with:
          java-version: 17
          distribution: 'adopt'
      - name: Build
        run: ./gradlew build
      - name: Upload artifacts
        uses: actions/upload-artifact@v4
        with:
          name: binaries
          path: |
            ./build/libs/*.jar
        
  create_release:
    needs: [build]
    runs-on: ubuntu-latest
    name: Create Release
    permissions:
      contents: write
    
    steps:
    - uses: actions/checkout@v4
    - name: Download artifacts
      uses: actions/download-artifact@v4
      with:
        name: binaries
        path: binaries
    - uses: actions/checkout@v4
    - name: Create Release
      uses: softprops/action-gh-release@v2
      with:
        tag_name: v${{ env.APP_VERSION }}
        name: Hypixel Cry ${{ env.APP_VERSION }}
        body: |
          # üåü Hypixel Cry ${{ env.APP_VERSION }} üåü

          ![Downloads](https://img.shields.io/github/downloads/Nekiplay/Hypixel-Cry/v${{ env.APP_VERSION }}/total) ![Version](https://img.shields.io/badge/version-${{ env.APP_VERSION }}-blue) ![Platform](https://img.shields.io/badge/platform-Windows%20|%20Linux-orange)
          ## üëè Contributors Hall of Fame
          Special thanks to our amazing contributors who made this release possible:
          - **@Nekiplay** - Core improvements and feature implementations
        files: |
          binaries/*.jar
